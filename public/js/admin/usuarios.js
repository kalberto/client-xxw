var app=new Vue({el:"#app",mixins:[main_mixin,message_mixin,listing_mixin,delete_mixin],data:{route:"/admin/api/usuarios",deleteRoute:"/admin/usuarios/",deleteLink:"",deletedIndex:0,status:[{status:1,texto_status:"Ativo"},{status:0,texto_status:"Desativado"}],contas:[{valor:1,texto:"Atualizada"},{valor:0,texto:"Pendente"}],carregando_upload:!1,upload_message:"Mensagem upload",upload_error:!1,show_upload_erros:!1,upload_errors:[],upload_sucesso:!1},computed:{totalUsuarios:function(){return this.registros&&this.registros.total?this.registros.total:0}},methods:{init:function(){this.pagination.conta="",this.setSortPagination("-updated_at"),this.load()},getParams:function(){return"?page="+this.pagination.page+"&limit="+this.pagination.limit+"&q="+this.pagination.q+"&sort="+this.pagination.sort+"&fields="+this.pagination.fields+"&state="+this.pagination.state+"&conta="+this.pagination.conta},getUsuarios:function(){if(this.registro)return this.registro.total;this.totalUsuarios=0},getDocumento:function(a){return a?14===a.length?a.replace(/(\d{2})(\d{3})(\d{3})(\d{4})(\d{2})/g,"$1.$2.$3/$4-$5"):a.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/g,"$1.$2.$3-$4"):"NÃ£o possui"},openModalUpload:function(){this.$refs.modalUploadPlanilha.click(),this.resetUploadVars()},openModalUploadMeta:function(){this.$refs.modalUploadPlanilhaMeta.click(),this.resetUploadVars()},openModalUploadClassificacao:function(){this.$refs.modalUploadPlanilhaClassificacao.click(),this.resetUploadVars()},openModalUploadSaldoVpc:function(){this.$refs.modalUploadPlanilhaSaldoVpc.click(),this.resetUploadVars()},upload:function(a,i){this.resetUploadVars();var o=new FormData;o.append("file",a),this.carregando_upload=!0,this.$http.post(base_url+i,o,{headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},emulateJSON:!0}).then(function(a){app.$data.carregando_upload=!1,app.$data.upload_message=a.body.msg,app.$data.upload_sucesso=!0},function(a){app.$data.carregando_upload=!1,a.body.errors?app.$data.upload_errors=a.body.errors:app.$data.upload_errors=[],app.$data.upload_message=a.body.msg,app.$data.upload_error=!0})},uploadArquivo:function(){void 0!==this.$refs.file.files&&this.$refs.file.files.length>0?this.upload(this.$refs.file.files[0],"/admin/api/usuarios/upload"):alert("Selecione um arquivo.")},uploadArquivoMeta:function(){null!=this.$refs.file_meta.files&&this.$refs.file_meta.files.length>0?this.upload(this.$refs.file_meta.files[0],"/admin/api/usuarios/upload/meta"):alert("Selecione um arquivo..")},uploadArquivoClassificacao:function(){null!=this.$refs.file_classificacao.files&&this.$refs.file_classificacao.files.length>0?this.upload(this.$refs.file_classificacao.files[0],"/admin/api/usuarios/upload/classificacao"):alert("Selecione um arquivo..")},uploadArquivoSaldoVpc:function(){null!=this.$refs.file_saldo_vpc.files&&this.$refs.file_saldo_vpc.files.length>0?this.upload(this.$refs.file_saldo_vpc.files[0],"/admin/api/usuarios/upload/saldo-vpc"):alert("Selecione um arquivo..")},toggleErrorsUpload:function(){this.show_upload_erros=!this.show_upload_erros},resetUploadVars:function(){this.upload_sucesso=!1,this.upload_errors=[],this.show_upload_erros=!1,this.upload_error=!1},getAtivoCor:function(a){return!0===a?"ativo":"desativado"}}});app.init();
