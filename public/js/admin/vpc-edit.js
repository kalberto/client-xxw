var app=new Vue({el:"#app",mixins:[main_mixin,edit_mixin,message_mixin,media_mixin,vpc_mixin,delete_mixin],mounted:function(){this.init()},data:{upload_message:"Mensagem upload",upload_error:!1,show_upload_erros:!1,upload_errors:[],upload_sucesso:!1,carregando_upload:!1,deleteRoute:"/admin/api/vpc/anexo-admin/",deletedIndex:0},methods:{init:function(){this.load(),this.initParent()},load:function(){var a=this;axios.get(this.base_url+"/admin/api/vpc/"+id).then(function(i){a.vpc=i.data.registro})},getStatusCor:function(a){return"APROVADO"===a?"ativo":"PAGO"===a?"ativo":"RECUSADO"===a?"desativado":"PENDENTE"===a||"EDIÇÃO"===a?"pendente":"outro"},getDocumento:function(a){return a?14===a.length?a.replace(/(\d{2})(\d{3})(\d{3})(\d{4})(\d{2})/g,"$1.$2.$3/$4-$5"):a.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/g,"$1.$2.$3-$4"):"Não possui"},aprovarVPC:function(){this.registro.status="APROVADO",this.edit("/admin/api/vpc/"+id,!1)},reprovarVPC:function(){this.registro.status="REPROVADA",this.edit("/admin/api/vpc/"+id,!1)},revisarVPC:function(){this.registro.status="REVISÃO",this.edit("/admin/api/vpc/"+id,!1)},recusarVPC:function(){this.registro.status="COMPROVAÇÃO",this.edit("/admin/api/vpc/"+id,!1)},pagarVPC:function(){this.registro.status="PAGO",this.edit("/admin/api/vpc/"+id,!1)},upload:function(a,i){this.resetUploadVars();var o=new FormData;o.append("file",a),this.carregando_upload=!0,this.$http.post(base_url+i,o,{headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},emulateJSON:!0}).then(function(a){app.$data.carregando_upload=!1,app.$data.upload_message=a.body.msg,app.$data.upload_sucesso=!0,a.body.anexos_admin&&(app.$data.vpc.anexos_admin=a.body.anexos_admin)},function(a){a.body.anexos_admin&&(app.$data.vpc.anexos_admin=a.body.anexos_admin),app.$data.carregando_upload=!1,a.body.errors?app.$data.upload_errors=a.body.errors:app.$data.upload_errors=[],app.$data.upload_message=a.body.msg,app.$data.upload_error=!0})},uploadArquivo:function(){void 0!==this.$refs.file.files&&this.$refs.file.files.length>0?this.upload(this.$refs.file.files[0],"/admin/api/vpc/"+id+"/upload"):alert("Selecione um arquivo.")},openModalAddAnexoAdmin:function(){this.$refs.modalUploadAnexoAdmin.click(),this.resetUploadVars()},resetUploadVars:function(){this.upload_sucesso=!1,this.upload_errors=[],this.show_upload_erros=!1,this.upload_error=!1},toggleErrorsUpload:function(){this.show_upload_erros=!this.show_upload_erros}}});
