var app=new Vue({el:"#app",data:{msg:"",registros:{data:[]},warning_message:"",warning:!1,pagination:{page:1,limit:10,total:0,q:"",sort:"-data",fields:""},paginator:!1},methods:{formatDate:function(a){return Vue.moment(a).format("DD/MM/YYYY H:m")},loadLogs:function(a){$.ajax({url:base_url+"/admin/api/log_acessos?page="+this.pagination.page+"&limit="+this.pagination.limit+"&q="+this.pagination.q+"&sort="+this.pagination.sort+"&fields="+this.pagination.fields,method:"GET",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}).done(function(a){app.$data.paginator=a.pagination,app.$data.registros=a.registros,app.$data.registros.length<=0&&(app.$data.warning=!0,app.$data.warning_message=a.msg)}).fail(function(a){app.$data.warning=!0,a.msg?app.$data.warning_message=a.msg:app.$data.warning_message="Ocorreu um erro, tente novamente mais tarde.",app.$data.paginator=a.responseJSON.pagination,app.$data.registros=a.responseJSON.registros})},search:function(a){a.preventDefault(),this.pagination.page=1,this.pagination.sort="",this.loadLogs()},goToPage:function(a){this.pagination.page=a,this.loadLogs()}}});app.loadLogs();
