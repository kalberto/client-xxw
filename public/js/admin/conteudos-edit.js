var app=new Vue({el:"#app",mixins:[main_mixin,edit_mixin,errors_mixin,message_mixin,media_mixin,conteudo_mixin],data:{uploadFiles:[],sendingFile:!1,errorFile:!1,successFile:!1},created:function(){this.load()},methods:{load:function(){var e=this;axios.get(base_url+"/admin/api/conteudos/"+id).then(function(s){e.registro=s.data.registro,null===e.registro.perfil_id&&(e.registro.perfil_id="")})},editConteudo:function(){this.editNoReload("/admin/api/conteudos/"+id,!1),this.sendDocumentos()},addDocumentos:function(){this.uploadFiles=this.$refs.documentos.files},sendDocumentos:function(){var e=this;if(this.uploadFiles.length>0){for(var s=new FormData,i=0;i<this.uploadFiles.length;i++)s.append("documentos[]",this.uploadFiles[i]);this.sendingFile=!0,this.errorFile=!1,this.successFile=!1,this.sendingMessage="Enviando...",axios.post(base_url+"/admin/api/conteudos/"+id+"/save-files",s).then(function(s){e.successMessage=s.data.msg,e.successFile=!0,setTimeout(function(){e.successFile=!1},3e3)}).catch(function(s){if(e.errorFile=!0,e.errorMessage=s.response.data.msg,s.response.data.error_validate){var i=s.response.data.error_validate;e.errors&&(e.errors=i),e.has_errors&&(e.has_errors=[]),e.insertErrors(i)}}).finally(function(){e.sendingFile=!1,e.scrollToTop()})}else this.successFile=!0,setTimeout(function(){e.successFile=!1},5e3)},deleteFile:function(e,s){var i=this,o=this.base_url+"/admin/api/conteudos-documentos/"+e;confirm("Tem certeza que deseja deletar o arquivo?")&&axios.delete(o).then(function(e){i.registro.documentos.splice(s,1),console.log("O arquivo foi deletado")}).catch(function(e){e.response.data.msg?console.log(e.response.data.msg):console.log("Ocorreu um erro ao deletar o arquivo")})}}});
